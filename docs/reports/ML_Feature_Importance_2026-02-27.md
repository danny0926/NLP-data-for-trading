# ML Feature Importance Analysis Report
# 國會交易訊號 — 機器學習特徵重要性分析

**Generated**: 2026-02-27
**Samples**: 410
**Models**: RandomForestRegressor, GradientBoostingClassifier

---

## Executive Summary

本報告使用機器學習模型分析國會交易訊號中各特徵的重要性。
透過 410 筆交易資料，我們識別出影響訊號品質分數（SQS Score）
與品質等級（SQS Grade）的關鍵因子。

**核心發現**：
- **#1 actionability** — 綜合重要性分數 1.000
- **#2 pis_diversification** — 綜合重要性分數 0.500
- **#3 filing_lag_days** — 綜合重要性分數 0.344

---

## 1. Feature Importance Ranking (Top 10)

| Rank | Feature | Regression | Classification | Combined |
|------|---------|-----------|---------------|----------|
| 1 | actionability | 0.0000 | 0.9932 | 1.000 |
| 2 | pis_diversification | 0.5249 | 0.0003 | 0.500 |
| 3 | filing_lag_days | 0.3604 | 0.0019 | 0.344 |
| 4 | amount_encoded | 0.0617 | 0.0017 | 0.060 |
| 5 | pis_total | 0.0229 | 0.0004 | 0.022 |
| 6 | is_buy | 0.0126 | 0.0009 | 0.012 |
| 7 | pis_activity | 0.0052 | 0.0000 | 0.005 |
| 8 | pis_conviction | 0.0043 | 0.0004 | 0.004 |
| 9 | politician_total_trades | 0.0027 | 0.0001 | 0.003 |
| 10 | chamber_encoded | 0.0021 | 0.0000 | 0.002 |

### Feature Categories Summary

| Category | Features | Avg Combined Score |
|----------|----------|-------------------|
| SQS Dimensions | 5 features | 0.200 |
| Trade Attributes | 5 features | 0.084 |
| Politician Profile | 7 features | 0.077 |
| Convergence | 2 features | 0.000 |
| Fama-French | 5 features | 0.000 |

---

## 2. Regression Model (Signal Strength Prediction)

| Metric | Value |
|--------|-------|
| CV R2 (mean ± std) | 0.5750 ± 0.1061 |
| CV MAE (mean ± std) | 3.2929 ± 0.5510 |
| Training R2 | 0.6758 |
| Training MAE | 2.9661 |

**Per-fold R2 scores**: 0.521, 0.503, 0.590, 0.485, 0.775

### Interpretation

模型對 SQS Score 有中等以上的預測能力。特徵組合能解釋目標變數的大部分變異。

---

## 3. Classification Model (Grade Prediction)

| Metric | Value |
|--------|-------|
| CV Accuracy (mean ± std) | 0.9927 ± 0.0098 |
| CV F1 (mean ± std) | 0.9957 ± 0.0059 |
| Training Accuracy | 1.0000 |

**Class Distribution**:
- Gold/Silver: 363 (88.5%)
- Bronze/Discard: 47 (11.5%)

**Per-class Metrics**:

| Class | Precision | Recall | F1-Score | Support |
|-------|-----------|--------|----------|---------|
| Bronze/Discard | 1.000 | 1.000 | 1.000 | 47.0 |
| Gold/Silver | 1.000 | 1.000 | 1.000 | 363.0 |

### Interpretation

資料高度不平衡（Gold/Silver : Bronze/Discard = 7.7:1），分類器可能偏向多數類別。特徵重要性仍可作為參考，但需謹慎解讀準確率。

---

## 4. Key Insights & Recommendations

### 最重要的特徵類別

1. **SQS Dimensions** (avg score: 0.200)
1. **Trade Attributes** (avg score: 0.084)
1. **Politician Profile** (avg score: 0.077)
1. **Fama-French** (avg score: 0.000)
1. **Convergence** (avg score: 0.000)

### Actionable Takeaways

- **申報延遲 (filing_lag_days)** 是重要特徵 — 延遲天數顯著影響訊號品質，較短的申報延遲通常產生更強的訊號。
- **政治人物信用評分 (PIS)** 很重要 — 建議優先關注高 PIS 評分政治人物的交易。
- **交易金額** 影響顯著 — 較大金額交易傾向產生更強訊號（更高的 conviction）。
- **SQS 維度** 是核心驅動因子 — 這些經 LLM 評估的品質維度與最終訊號強度高度相關。

### Limitations

- **樣本量限制**: 僅 410 筆樣本，模型泛化能力有限
- **目標變數可能有洩漏**: signal_strength 部分由 SQS 維度計算而來，兩者可能存在循環依賴
- **時間序列未考慮**: 使用隨機 K-Fold，未考慮時間順序（未來可改用 TimeSeriesSplit）
- **類別不平衡**: Grade 分類嚴重不平衡，Bronze/Discard 樣本太少

---

## 5. Plots

- Feature Importance (Dual): `D:\VScode_project\NLP data for trading\docs\plots\ml_feature_importance.png`
- Combined Ranking: `D:\VScode_project\NLP data for trading\docs\plots\ml_combined_importance.png`

---

## 6. Technical Details

**Regression Model**: RandomForestRegressor(n_estimators=200, max_depth=8, min_samples_leaf=10)
**Classification Model**: GradientBoostingClassifier(n_estimators=150, max_depth=4, lr=0.1)
**Cross-Validation**: 5-fold KFold (shuffle=True, random_state=42)
**Feature Count**: Regression=19, Classification=24

---

*Generated by ML Signal Model — Congressional Trading Intelligence System*
