<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Political Alpha Monitor Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
  :root {
    --bg: #0f172a;
    --card: #1e293b;
    --border: #334155;
    --text: #e2e8f0;
    --text-dim: #94a3b8;
    --accent: #38bdf8;
    --green: #4ade80;
    --red: #f87171;
    --yellow: #fbbf24;
    --purple: #a78bfa;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
  }
  .header {
    background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
    border-bottom: 1px solid var(--border);
    padding: 1.5rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .header h1 { font-size: 1.5rem; color: var(--accent); }
  .header .meta { color: var(--text-dim); font-size: 0.85rem; }
  .container { max-width: 1400px; margin: 0 auto; padding: 1.5rem; }

  /* KPI Cards */
  .kpi-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 1.5rem;
  }
  .kpi {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.2rem;
    text-align: center;
  }
  .kpi .value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent);
  }
  .kpi .label {
    font-size: 0.85rem;
    color: var(--text-dim);
    margin-top: 0.3rem;
  }
  .kpi.green .value { color: var(--green); }
  .kpi.yellow .value { color: var(--yellow); }
  .kpi.purple .value { color: var(--purple); }

  /* Grid Layout */
  .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }
  .grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }
  @media (max-width: 900px) {
    .grid-2, .grid-3 { grid-template-columns: 1fr; }
  }

  /* Cards */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 1.2rem;
  }
  .card h2 {
    font-size: 1.1rem;
    margin-bottom: 1rem;
    color: var(--text);
    border-bottom: 1px solid var(--border);
    padding-bottom: 0.5rem;
  }

  /* Tables */
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.85rem;
  }
  th, td {
    padding: 0.5rem 0.6rem;
    text-align: left;
    border-bottom: 1px solid var(--border);
  }
  th {
    color: var(--text-dim);
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  tr:hover { background: rgba(56, 189, 248, 0.05); }

  /* Tags */
  .tag {
    display: inline-block;
    padding: 0.15rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  .tag-long { background: rgba(74, 222, 128, 0.15); color: var(--green); }
  .tag-short { background: rgba(248, 113, 113, 0.15); color: var(--red); }
  .tag-buy { background: rgba(74, 222, 128, 0.15); color: var(--green); }
  .tag-sale { background: rgba(248, 113, 113, 0.15); color: var(--red); }
  .tag-high { background: rgba(248, 113, 113, 0.15); color: var(--red); }
  .tag-medium { background: rgba(251, 191, 36, 0.15); color: var(--yellow); }
  .tag-house { background: rgba(56, 189, 248, 0.15); color: var(--accent); }
  .tag-senate { background: rgba(167, 139, 250, 0.15); color: var(--purple); }

  /* Progress bar */
  .progress-bar {
    height: 8px;
    background: var(--border);
    border-radius: 4px;
    overflow: hidden;
    margin-top: 0.3rem;
  }
  .progress-fill {
    height: 100%;
    border-radius: 4px;
    background: linear-gradient(90deg, var(--accent), var(--green));
  }

  /* Chart containers */
  .chart-container {
    position: relative;
    height: 280px;
  }

  /* Footer */
  .footer {
    text-align: center;
    padding: 2rem;
    color: var(--text-dim);
    font-size: 0.8rem;
    border-top: 1px solid var(--border);
    margin-top: 2rem;
  }

  /* Signal strength bar */
  .strength-bar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  .strength-bar .bar {
    flex: 1;
    height: 6px;
    background: var(--border);
    border-radius: 3px;
    overflow: hidden;
  }
  .strength-bar .fill {
    height: 100%;
    border-radius: 3px;
  }
</style>
</head>
<body>

<div class="header">
  <div>
    <h1>Political Alpha Monitor</h1>
    <div class="meta">Congressional Trading Intelligence Dashboard</div>
  </div>
  <div class="meta" style="text-align:right">
    <div>Generated: 2026-02-27 21:17:38</div>
    <div>Data source: data/data.db</div>
  </div>
</div>

<div class="container">

  <!-- KPI Row -->
  <div class="kpi-row">
    <div class="kpi">
      <div class="value">404</div>
      <div class="label">Congress Trades</div>
    </div>
    <div class="kpi green">
      <div class="value">352</div>
      <div class="label">Alpha Signals</div>
    </div>
    <div class="kpi yellow">
      <div class="value">20</div>
      <div class="label">Portfolio Positions</div>
    </div>
    <div class="kpi purple">
      <div class="value">6</div>
      <div class="label">Convergence Events</div>
    </div>
    <div class="kpi green">
      <div class="value">+1.11%</div>
      <div class="label">Avg Alpha (5d)</div>
    </div>
  </div>

  <!-- Charts Row -->
  <div class="grid-2">
    <div class="card">
      <h2>Portfolio Sector Allocation</h2>
      <div class="chart-container">
        <canvas id="sectorChart"></canvas>
      </div>
    </div>
    <div class="card">
      <h2>Top Traded Tickers</h2>
      <div class="chart-container">
        <canvas id="tickerChart"></canvas>
      </div>
    </div>
  </div>

  <!-- Signal Strength + Convergence -->
  <div class="grid-2">
    <div class="card">
      <h2>Top Alpha Signals</h2>
      <table>
        <thead>
          <tr>
            <th>Ticker</th>
            <th>Direction</th>
            <th>Alpha 5d</th>
            <th>Alpha 20d</th>
            <th>Strength</th>
          </tr>
        </thead>
        <tbody id="signalsTable"></tbody>
      </table>
    </div>
    <div class="card">
      <h2>Convergence Signals</h2>
      <table>
        <thead>
          <tr>
            <th>Ticker</th>
            <th>Direction</th>
            <th>Politicians</th>
            <th>Score</th>
          </tr>
        </thead>
        <tbody id="convergenceTable"></tbody>
      </table>
      <div style="margin-top:1rem">
        <h2>Trade Type Distribution</h2>
        <div class="chart-container" style="height:200px">
          <canvas id="tradeTypeChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Portfolio Positions -->
  <div class="card" style="margin-bottom:1.5rem">
    <h2>Portfolio Positions (Top 20)</h2>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Ticker</th>
          <th>Sector</th>
          <th>Weight</th>
          <th>Conviction</th>
          <th>Alpha 5d</th>
          <th>Volatility</th>
          <th>Sharpe</th>
        </tr>
      </thead>
      <tbody id="positionsTable"></tbody>
    </table>
  </div>

  <!-- Rankings + Recent Trades -->
  <div class="grid-2">
    <div class="card">
      <h2>Politician Intelligence Score (PIS)</h2>
      <table>
        <thead>
          <tr>
            <th>Rank</th>
            <th>Politician</th>
            <th>Chamber</th>
            <th>Trades</th>
            <th>PIS</th>
          </tr>
        </thead>
        <tbody id="rankingsTable"></tbody>
      </table>
    </div>
    <div class="card">
      <h2>Recent Filings</h2>
      <table>
        <thead>
          <tr>
            <th>Politician</th>
            <th>Ticker</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Filed</th>
          </tr>
        </thead>
        <tbody id="recentTable"></tbody>
      </table>
    </div>
  </div>

</div>

<div class="footer">
  Political Alpha Monitor v2.0 | Congressional Trading Intelligence System<br>
  Research use only. Not investment advice. Past performance does not guarantee future results.
</div>

<script>
// ── Data ──
const positions = [{"id": "47d56e18-9af7-437b-ba0d-03d14edc5c49", "ticker": "GS", "sector": "Financial Services", "weight": 0.0561, "conviction_score": 75.3, "expected_alpha": 0.0081, "volatility_30d": 0.3153, "sharpe_estimate": 1.34, "reasoning": "4 \u4f4d\u8b70\u54e1\u4ea4\u6613; 4 \u7b46\u8ce3\u51fa(\u53cd\u5411); \u6536\u6582\u8a0a\u865f(\u5206\u65781.42); \u9ad8\u91d1\u984d\u4ea4\u6613; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "9c952cb7-bb91-47ed-bec8-2ebdf30f9eb5", "ticker": "AAPL", "sector": "Technology", "weight": 0.0542, "conviction_score": 70.81, "expected_alpha": 0.0085, "volatility_30d": 0.2784, "sharpe_estimate": 1.59, "reasoning": "2 \u4f4d\u8b70\u54e1\u4ea4\u6613; 2 \u7b46\u8cb7\u5165; \u6536\u6582\u8a0a\u865f(\u5206\u65781.50)", "created_at": "2026-02-27 21:17:38"}, {"id": "f45e3714-4020-4fdb-9012-783a6fa714e2", "ticker": "NFLX", "sector": "Communication Services", "weight": 0.054, "conviction_score": 70.19, "expected_alpha": 0.0059, "volatility_30d": 0.3368, "sharpe_estimate": 0.91, "reasoning": "3 \u4f4d\u8b70\u54e1\u4ea4\u6613; 1 \u7b46\u8cb7\u5165; 2 \u7b46\u8ce3\u51fa(\u53cd\u5411); \u6536\u6582\u8a0a\u865f(\u5206\u65780.97); House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "59b3cdc8-a4de-4793-9a17-2247ae2d0615", "ticker": "DIS", "sector": "Communication Services", "weight": 0.0539, "conviction_score": 69.98, "expected_alpha": 0.0084, "volatility_30d": 0.3569, "sharpe_estimate": 1.22, "reasoning": "2 \u4f4d\u8b70\u54e1\u4ea4\u6613; 2 \u7b46\u8cb7\u5165; \u6536\u6582\u8a0a\u865f(\u5206\u65781.48)", "created_at": "2026-02-27 21:17:38"}, {"id": "3238be61-674d-40f1-97e6-76a7e70429c3", "ticker": "ETN", "sector": "Industrials", "weight": 0.0535, "conviction_score": 69.15, "expected_alpha": 0.0075, "volatility_30d": 0.3161, "sharpe_estimate": 1.23, "reasoning": "2 \u4f4d\u8b70\u54e1\u4ea4\u6613; 2 \u7b46\u8cb7\u5165; 1 \u7b46\u8ce3\u51fa(\u53cd\u5411); \u6536\u6582\u8a0a\u865f(\u5206\u65781.48); House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "1b09a532-e45b-4b3a-ae9a-50e1c22ee02e", "ticker": "PWR", "sector": "Industrials", "weight": 0.05, "conviction_score": 60.61, "expected_alpha": 0.0053, "volatility_30d": 0.4075, "sharpe_estimate": 0.68, "reasoning": "2 \u4f4d\u8b70\u54e1\u4ea4\u6613; 1 \u7b46\u8cb7\u5165; 3 \u7b46\u8ce3\u51fa(\u53cd\u5411); \u6536\u6582\u8a0a\u865f(\u5206\u65780.63); House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "7fc877e2-5e75-4f75-9012-8746e9bae1da", "ticker": "BRO", "sector": "Financial Services", "weight": 0.0493, "conviction_score": 59.02, "expected_alpha": 0.0054, "volatility_30d": 0.3451, "sharpe_estimate": 0.81, "reasoning": "2 \u4f4d\u8b70\u54e1\u4ea4\u6613; 2 \u7b46\u8cb7\u5165; 1 \u7b46\u8ce3\u51fa(\u53cd\u5411); House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "fd26d1ba-5007-494d-ac52-2dc446d630ce", "ticker": "WPM", "sector": "Basic Materials", "weight": 0.0493, "conviction_score": 58.93, "expected_alpha": 0.0116, "volatility_30d": 0.6081, "sharpe_estimate": 0.99, "reasoning": "1 \u7b46\u8cb7\u5165; \u9ad8\u91d1\u984d\u4ea4\u6613; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "6925bd7b-0a7b-4af6-a942-e7884847a940", "ticker": "FNV", "sector": "Basic Materials", "weight": 0.0493, "conviction_score": 58.93, "expected_alpha": 0.0116, "volatility_30d": 0.5309, "sharpe_estimate": 1.14, "reasoning": "1 \u7b46\u8cb7\u5165; \u9ad8\u91d1\u984d\u4ea4\u6613; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "c01d2876-360b-41d0-9df6-21ba084effce", "ticker": "SPGI", "sector": "Financial Services", "weight": 0.0491, "conviction_score": 58.43, "expected_alpha": 0.0116, "volatility_30d": 0.4982, "sharpe_estimate": 1.21, "reasoning": "1 \u7b46\u8cb7\u5165; \u9ad8\u91d1\u984d\u4ea4\u6613; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "dd7437fa-72e1-43a0-ac33-b16fdea3ae13", "ticker": "GE", "sector": "Industrials", "weight": 0.0489, "conviction_score": 57.93, "expected_alpha": 0.0116, "volatility_30d": 0.3593, "sharpe_estimate": 1.68, "reasoning": "1 \u7b46\u8cb7\u5165; \u9ad8\u91d1\u984d\u4ea4\u6613; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "e13dfd4e-e34c-4020-bb69-7d1300eadac2", "ticker": "XOM", "sector": "Energy", "weight": 0.0488, "conviction_score": 57.64, "expected_alpha": 0.0067, "volatility_30d": 0.2795, "sharpe_estimate": 1.25, "reasoning": "2 \u4f4d\u8b70\u54e1\u4ea4\u6613; 1 \u7b46\u8cb7\u5165; 1 \u7b46\u8ce3\u51fa(\u53cd\u5411); \u9ad8\u91d1\u984d\u4ea4\u6613", "created_at": "2026-02-27 21:17:38"}, {"id": "c942c616-6e1d-43b6-ad39-cb19a5a677b9", "ticker": "FERG", "sector": "Industrials", "weight": 0.0487, "conviction_score": 57.43, "expected_alpha": 0.0116, "volatility_30d": 0.2727, "sharpe_estimate": 2.21, "reasoning": "1 \u7b46\u8cb7\u5165; \u9ad8\u91d1\u984d\u4ea4\u6613; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "ae906161-3849-4404-8821-cb179a7fe6c2", "ticker": "UNH", "sector": "Healthcare", "weight": 0.0485, "conviction_score": 56.93, "expected_alpha": 0.0116, "volatility_30d": 0.6226, "sharpe_estimate": 0.97, "reasoning": "1 \u7b46\u8cb7\u5165; \u9ad8\u91d1\u984d\u4ea4\u6613; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "ac10f0d4-4de6-4251-b3da-f87e1bac6a7b", "ticker": "PTC", "sector": "Technology", "weight": 0.0485, "conviction_score": 56.9, "expected_alpha": 0.0044, "volatility_30d": 0.3589, "sharpe_estimate": 0.64, "reasoning": "2 \u4f4d\u8b70\u54e1\u4ea4\u6613; 1 \u7b46\u8cb7\u5165; 4 \u7b46\u8ce3\u51fa(\u53cd\u5411); House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "62f08f52-25e8-4082-a6fd-4d6e69aea7a5", "ticker": "FINMF", "sector": "Industrials", "weight": 0.0476, "conviction_score": 54.77, "expected_alpha": 0.0062, "volatility_30d": 0.4145, "sharpe_estimate": 0.78, "reasoning": "1 \u7b46\u8cb7\u5165; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "7d001277-b7ca-46cd-bc4c-8bb6cc5cf42e", "ticker": "HESAF", "sector": "Consumer Cyclical", "weight": 0.0476, "conviction_score": 54.77, "expected_alpha": 0.0062, "volatility_30d": 0.3967, "sharpe_estimate": 0.81, "reasoning": "1 \u7b46\u8cb7\u5165; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "a99dba55-9113-414d-bcbd-6ea38252f15f", "ticker": "SAN", "sector": "Financial Services", "weight": 0.0476, "conviction_score": 54.77, "expected_alpha": 0.0062, "volatility_30d": 0.3852, "sharpe_estimate": 0.84, "reasoning": "1 \u7b46\u8cb7\u5165; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "3f3a5b56-c4ff-4397-b46d-ce75c8d0e5d8", "ticker": "BIIB", "sector": "Healthcare", "weight": 0.0476, "conviction_score": 54.77, "expected_alpha": 0.0062, "volatility_30d": 0.4069, "sharpe_estimate": 0.79, "reasoning": "1 \u7b46\u8cb7\u5165; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}, {"id": "aaa32b5c-9b75-461e-a058-5bc65c5b324a", "ticker": "ASML", "sector": "Technology", "weight": 0.0476, "conviction_score": 54.77, "expected_alpha": 0.0062, "volatility_30d": 0.407, "sharpe_estimate": 0.79, "reasoning": "1 \u7b46\u8cb7\u5165; House \u70ba\u4e3b", "created_at": "2026-02-27 21:17:38"}];
const signals = [{"ticker": "ETN", "direction": "LONG", "signal_strength": 0.9632, "alpha_5d": 1.424, "alpha_20d": 1.448, "confidence": 0.6266666666666666}, {"ticker": "AAPL", "direction": "LONG", "signal_strength": 0.9247, "alpha_5d": 1.424, "alpha_20d": 1.448, "confidence": 0.6395}, {"ticker": "DIS", "direction": "LONG", "signal_strength": 0.819, "alpha_5d": 1.3008, "alpha_20d": 1.3216, "confidence": 0.6099}, {"ticker": "NFLX", "direction": "LONG", "signal_strength": 0.819, "alpha_5d": 1.3008, "alpha_20d": 1.388, "confidence": 0.5825333333333333}, {"ticker": "GS", "direction": "LONG", "signal_strength": 0.7496, "alpha_5d": 1.124, "alpha_20d": 2.347, "confidence": 0.599725}, {"ticker": "FNV", "direction": "LONG", "signal_strength": 0.7105, "alpha_5d": 1.386, "alpha_20d": 1.422, "confidence": 0.5126}, {"ticker": "WPM", "direction": "LONG", "signal_strength": 0.7105, "alpha_5d": 1.386, "alpha_20d": 1.422, "confidence": 0.5126}, {"ticker": "SPGI", "direction": "LONG", "signal_strength": 0.6904, "alpha_5d": 1.386, "alpha_20d": 1.422, "confidence": 0.4981}, {"ticker": "STT", "direction": "LONG", "signal_strength": 0.6552, "alpha_5d": 1.26, "alpha_20d": 3.7296, "confidence": 0.52}, {"ticker": "PWR", "direction": "LONG", "signal_strength": 0.5678, "alpha_5d": 0.962, "alpha_20d": 1.388, "confidence": 0.5743}, {"ticker": "CSGP", "direction": "LONG", "signal_strength": 0.4587, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4433}, {"ticker": "DASH", "direction": "LONG", "signal_strength": 0.4587, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.43268000000000006}, {"ticker": "ISRG", "direction": "LONG", "signal_strength": 0.4587, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4433}, {"ticker": "WDAY", "direction": "LONG", "signal_strength": 0.4587, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4433}, {"ticker": "AJINF", "direction": "LONG", "signal_strength": 0.4402, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4152}, {"ticker": "AMZN", "direction": "LONG", "signal_strength": 0.4402, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4081333333333333}, {"ticker": "ANET", "direction": "LONG", "signal_strength": 0.4402, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4152}, {"ticker": "ASML", "direction": "LONG", "signal_strength": 0.4402, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4764}, {"ticker": "AVAV", "direction": "LONG", "signal_strength": 0.4402, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4333}, {"ticker": "AZO", "direction": "LONG", "signal_strength": 0.4402, "alpha_5d": 0.924, "alpha_20d": 0.948, "confidence": 0.4152}];
const rankings = [{"politician_name": "Jake Auchincloss", "chamber": "House", "total_trades": 1, "avg_trade_size": 15001.0, "trades_per_month": 1.0, "unique_tickers": 1, "buy_count": 0, "sale_count": 1, "buy_sale_ratio": 0.0, "avg_filing_lag_days": 10.0, "diversification_ratio": 1.0, "pis_activity": 0.0, "pis_conviction": 1.41, "pis_diversification": 25.0, "pis_timing": 25.0, "pis_total": 51.41, "rank": 1, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Gilbert Cisneros", "chamber": "House", "total_trades": 272, "avg_trade_size": 9232.62, "trades_per_month": 150.5396, "unique_tickers": 200, "buy_count": 151, "sale_count": 121, "buy_sale_ratio": 1.2479, "avg_filing_lag_days": 54.4, "diversification_ratio": 0.7353, "pis_activity": 25.0, "pis_conviction": 0.83, "pis_diversification": 18.38, "pis_timing": 6.31, "pis_total": 50.52, "rank": 2, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "John Boozman", "chamber": "Senate", "total_trades": 37, "avg_trade_size": 1001.0, "trades_per_month": 37.0, "unique_tickers": 35, "buy_count": 23, "sale_count": 14, "buy_sale_ratio": 1.6429, "avg_filing_lag_days": 24.2, "diversification_ratio": 0.9459, "pis_activity": 6.02, "pis_conviction": 0.0, "pis_diversification": 23.65, "pis_timing": 19.02, "pis_total": 48.69, "rank": 3, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "David H McCormick", "chamber": "Senate", "total_trades": 9, "avg_trade_size": 250001.0, "trades_per_month": 9.0, "unique_tickers": 1, "buy_count": 8, "sale_count": 1, "buy_sale_ratio": 8.0, "avg_filing_lag_days": 26.1, "diversification_ratio": 0.1111, "pis_activity": 1.34, "pis_conviction": 25.0, "pis_diversification": 2.78, "pis_timing": 18.22, "pis_total": 47.34, "rank": 4, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Nancy Pelosi", "chamber": "House", "total_trades": 1, "avg_trade_size": 1001.0, "trades_per_month": 1.0, "unique_tickers": 1, "buy_count": 1, "sale_count": 0, "buy_sale_ratio": 1.0, "avg_filing_lag_days": 17.0, "diversification_ratio": 1.0, "pis_activity": 0.0, "pis_conviction": 0.0, "pis_diversification": 25.0, "pis_timing": 22.06, "pis_total": 47.06, "rank": 5, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "William F Hagerty, IV", "chamber": "Senate", "total_trades": 1, "avg_trade_size": 250001.0, "trades_per_month": 1.0, "unique_tickers": 0, "buy_count": 1, "sale_count": 0, "buy_sale_ratio": 1.0, "avg_filing_lag_days": 31.0, "diversification_ratio": 0.0, "pis_activity": 0.0, "pis_conviction": 25.0, "pis_diversification": 0.0, "pis_timing": 16.17, "pis_total": 41.17, "rank": 6, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Richard W. Allen", "chamber": "House", "total_trades": 6, "avg_trade_size": 32667.67, "trades_per_month": 4.0587, "unique_tickers": 5, "buy_count": 3, "sale_count": 3, "buy_sale_ratio": 1.0, "avg_filing_lag_days": 50.8, "diversification_ratio": 0.8333, "pis_activity": 0.51, "pis_conviction": 3.18, "pis_diversification": 20.83, "pis_timing": 7.83, "pis_total": 32.35, "rank": 7, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Debbie Dingell", "chamber": "House", "total_trades": 1, "avg_trade_size": 1001.0, "trades_per_month": 1.0, "unique_tickers": 1, "buy_count": 0, "sale_count": 0, "buy_sale_ratio": 0.0, "avg_filing_lag_days": 53.0, "diversification_ratio": 1.0, "pis_activity": 0.0, "pis_conviction": 0.0, "pis_diversification": 25.0, "pis_timing": 6.92, "pis_total": 31.92, "rank": 8, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Steve Cohen", "chamber": "House", "total_trades": 7, "avg_trade_size": 16001.0, "trades_per_month": 7.0, "unique_tickers": 7, "buy_count": 1, "sale_count": 6, "buy_sale_ratio": 0.1667, "avg_filing_lag_days": 67.3, "diversification_ratio": 1.0, "pis_activity": 1.0, "pis_conviction": 1.51, "pis_diversification": 25.0, "pis_timing": 0.91, "pis_total": 28.42, "rank": 9, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Sheri Biggs", "chamber": "House", "total_trades": 9, "avg_trade_size": 41112.11, "trades_per_month": 7.8274, "unique_tickers": 6, "buy_count": 7, "sale_count": 2, "buy_sale_ratio": 3.5, "avg_filing_lag_days": 69.4, "diversification_ratio": 0.6667, "pis_activity": 1.14, "pis_conviction": 4.03, "pis_diversification": 16.67, "pis_timing": 0.0, "pis_total": 21.84, "rank": 10, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Rob Bresnahan", "chamber": "House", "total_trades": 2, "avg_trade_size": 25501.0, "trades_per_month": 2.0, "unique_tickers": 0, "buy_count": 2, "sale_count": 0, "buy_sale_ratio": 2.0, "avg_filing_lag_days": 24.0, "diversification_ratio": 0.0, "pis_activity": 0.17, "pis_conviction": 2.46, "pis_diversification": 0.0, "pis_timing": 19.11, "pis_total": 21.74, "rank": 11, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "April McClain Delaney", "chamber": "House", "total_trades": 31, "avg_trade_size": 1001.0, "trades_per_month": 15.9939, "unique_tickers": 18, "buy_count": 10, "sale_count": 21, "buy_sale_ratio": 0.4762, "avg_filing_lag_days": 61.1, "diversification_ratio": 0.5806, "pis_activity": 2.51, "pis_conviction": 0.0, "pis_diversification": 14.52, "pis_timing": 3.51, "pis_total": 20.53, "rank": 12, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Richard Blumenthal", "chamber": "Senate", "total_trades": 9, "avg_trade_size": 14223.22, "trades_per_month": 9.0, "unique_tickers": 0, "buy_count": 3, "sale_count": 6, "buy_sale_ratio": 0.5, "avg_filing_lag_days": 27.0, "diversification_ratio": 0.0, "pis_activity": 1.34, "pis_conviction": 1.33, "pis_diversification": 0.0, "pis_timing": 17.85, "pis_total": 20.52, "rank": 13, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Suzan K. DelBene", "chamber": "House", "total_trades": 5, "avg_trade_size": 113201.0, "trades_per_month": 5.0, "unique_tickers": 0, "buy_count": 2, "sale_count": 3, "buy_sale_ratio": 0.6667, "avg_filing_lag_days": 53.2, "diversification_ratio": 0.0, "pis_activity": 0.67, "pis_conviction": 11.27, "pis_diversification": 0.0, "pis_timing": 6.83, "pis_total": 18.77, "rank": 14, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Susan M Collins", "chamber": "Senate", "total_trades": 1, "avg_trade_size": 50001.0, "trades_per_month": 1.0, "unique_tickers": 0, "buy_count": 1, "sale_count": 0, "buy_sale_ratio": 1.0, "avg_filing_lag_days": 38.0, "diversification_ratio": 0.0, "pis_activity": 0.0, "pis_conviction": 4.92, "pis_diversification": 0.0, "pis_timing": 13.22, "pis_total": 18.14, "rank": 15, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Donald Sternoff Jr. Beyer", "chamber": "House", "total_trades": 10, "avg_trade_size": 36001.0, "trades_per_month": 6.088, "unique_tickers": 2, "buy_count": 4, "sale_count": 6, "buy_sale_ratio": 0.6667, "avg_filing_lag_days": 51.2, "diversification_ratio": 0.2, "pis_activity": 0.85, "pis_conviction": 3.51, "pis_diversification": 5.0, "pis_timing": 7.67, "pis_total": 17.04, "rank": 16, "updated_at": "2026-02-27 21:17:37"}, {"politician_name": "Michael A. Jr. Collins", "chamber": "House", "total_trades": 2, "avg_trade_size": 1001.0, "trades_per_month": 2.0, "unique_tickers": 0, "buy_count": 1, "sale_count": 1, "buy_sale_ratio": 1.0, "avg_filing_lag_days": 54.5, "diversification_ratio": 0.0, "pis_activity": 0.17, "pis_conviction": 0.0, "pis_diversification": 0.0, "pis_timing": 6.29, "pis_total": 6.45, "rank": 17, "updated_at": "2026-02-27 21:17:37"}];
const convergence = [{"id": "3800fc2a-2878-47d1-93b8-7cd1ab78b9b8", "ticker": "AAPL", "direction": "Buy", "politician_count": 2, "politicians": "Nancy Pelosi(House), John Boozman(Senate)", "chambers": "House/Senate", "window_start": "2026-01-15", "window_end": "2026-01-15", "span_days": 0, "score": 1.501, "score_base": 0.5, "score_cross_chamber": 0.5, "score_time_density": 1.0, "score_amount_weight": 0.002, "detected_at": "2026-02-27 13:17:37"}, {"id": "76114dec-eb2f-4a06-8a2e-9cd33c376691", "ticker": "ETN", "direction": "Buy", "politician_count": 2, "politicians": "John Boozman(Senate), Gilbert Cisneros(House)", "chambers": "House/Senate", "window_start": "2026-01-29", "window_end": "2026-01-30", "span_days": 1, "score": 1.484, "score_base": 0.5, "score_cross_chamber": 0.5, "score_time_density": 0.967, "score_amount_weight": 0.002, "detected_at": "2026-02-27 13:17:37"}, {"id": "09943efd-2ef4-4fdf-925b-61067081d284", "ticker": "DIS", "direction": "Buy", "politician_count": 2, "politicians": "John Boozman(Senate), Gilbert Cisneros(House)", "chambers": "House/Senate", "window_start": "2026-01-08", "window_end": "2026-01-09", "span_days": 1, "score": 1.484, "score_base": 0.5, "score_cross_chamber": 0.5, "score_time_density": 0.967, "score_amount_weight": 0.002, "detected_at": "2026-02-27 13:17:37"}, {"id": "fe072bd5-dc05-4860-a521-dcd088e5badf", "ticker": "GS", "direction": "Sale", "politician_count": 3, "politicians": "Steve Cohen(House), Donald Sternoff Jr. Beyer(House), Sheri Biggs(House)", "chambers": "House", "window_start": "2025-12-17", "window_end": "2025-12-22", "span_days": 5, "score": 1.419, "score_base": 1.0, "score_cross_chamber": 0.0, "score_time_density": 0.833, "score_amount_weight": 0.005, "detected_at": "2026-02-27 13:17:37"}, {"id": "e680c3cf-d314-41a1-aff2-35eedbcd1381", "ticker": "NFLX", "direction": "Sale", "politician_count": 2, "politicians": "Gilbert Cisneros(House), Richard W. Allen(House)", "chambers": "House", "window_start": "2025-12-10", "window_end": "2025-12-12", "span_days": 2, "score": 0.967, "score_base": 0.5, "score_cross_chamber": 0.0, "score_time_density": 0.933, "score_amount_weight": 0.002, "detected_at": "2026-02-27 13:17:37"}, {"id": "0ad20dcc-85ca-44fe-87fd-c1fa02e17718", "ticker": "PWR", "direction": "Sale", "politician_count": 2, "politicians": "April McClain Delaney(House), Gilbert Cisneros(House)", "chambers": "House", "window_start": "2025-12-02", "window_end": "2025-12-24", "span_days": 22, "score": 0.634, "score_base": 0.5, "score_cross_chamber": 0.0, "score_time_density": 0.267, "score_amount_weight": 0.002, "detected_at": "2026-02-27 13:17:37"}];
const recentTrades = [{"politician_name": "Richard W. Allen", "ticker": "FERG", "transaction_type": "Buy", "amount_range": "$15,001 - $50,000", "transaction_date": "2025-12-12", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Richard W. Allen", "ticker": "AWK", "transaction_type": "Sale", "amount_range": "$50,001 - $100,000", "transaction_date": "2026-01-14", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Richard W. Allen", "ticker": "PAYX", "transaction_type": "Sale", "amount_range": "$15,001 - $50,000", "transaction_date": "2026-01-14", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Richard W. Allen", "ticker": "SPGI", "transaction_type": "Buy", "amount_range": "$15,001 - $50,000", "transaction_date": "2026-01-14", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Jake Auchincloss", "ticker": "STT", "transaction_type": "Sale", "amount_range": "$15,001 - $50,000", "transaction_date": "2026-02-17", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Donald Sternoff Jr. Beyer", "ticker": "GS", "transaction_type": "Sale", "amount_range": "$15,001 - $50,000", "transaction_date": "2025-12-18", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Donald Sternoff Jr. Beyer", "ticker": "S", "transaction_type": "Sale", "amount_range": "$50,001 - $100,000", "transaction_date": "2025-12-18", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Donald Sternoff Jr. Beyer", "ticker": "S", "transaction_type": "Sale", "amount_range": "$50,001 - $100,000", "transaction_date": "2025-12-10", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Sheri Biggs", "ticker": "UBS", "transaction_type": "Sale", "amount_range": "$15,001 - $50,000", "transaction_date": "2025-12-02", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Sheri Biggs", "ticker": "OT", "transaction_type": "Buy", "amount_range": "$1,001 - $15,000", "transaction_date": "2025-12-30", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Sheri Biggs", "ticker": "CS", "transaction_type": "Buy", "amount_range": "$50,001 - $100,000", "transaction_date": "2025-12-31", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Sheri Biggs", "ticker": "HN", "transaction_type": "Buy", "amount_range": "$250,001 - $500,000", "transaction_date": "2025-12-26", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Sheri Biggs", "ticker": "GS", "transaction_type": "Sale", "amount_range": "$1,001 - $15,000", "transaction_date": "2025-12-22", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Sheri Biggs", "ticker": "HN", "transaction_type": "Buy", "amount_range": "$50,001 - $100,000", "transaction_date": "2025-12-26", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Sheri Biggs", "ticker": "KRSOX", "transaction_type": "Buy", "amount_range": "$1,001 - $15,000", "transaction_date": "2026-01-05", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Gilbert Cisneros", "ticker": "AFT", "transaction_type": "Sale", "amount_range": "$1,001 - $15,000", "transaction_date": "2025-12-19", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Gilbert Cisneros", "ticker": "ACN", "transaction_type": "Buy", "amount_range": "$1,001 - $15,000", "transaction_date": "2025-12-19", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Gilbert Cisneros", "ticker": "AMD", "transaction_type": "Sale", "amount_range": "$15,001 - $50,000", "transaction_date": "2025-12-19", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Gilbert Cisneros", "ticker": "AVAV", "transaction_type": "Buy", "amount_range": "$1,001 - $15,000", "transaction_date": "2025-12-15", "filing_date": "2026-02-27", "chamber": "House"}, {"politician_name": "Gilbert Cisneros", "ticker": "AGIO", "transaction_type": "Buy", "amount_range": "$1,001 - $15,000", "transaction_date": "2025-12-11", "filing_date": "2026-02-27", "chamber": "House"}];
const sectors = {"Financial Services": 0.2021, "Technology": 0.1503, "Communication Services": 0.1079, "Industrials": 0.2487, "Basic Materials": 0.0986, "Energy": 0.0488, "Healthcare": 0.0961, "Consumer Cyclical": 0.0476};
const tradeTypes = [{"transaction_type": "Buy", "cnt": 218}, {"transaction_type": "Sale", "cnt": 185}, {"transaction_type": "Exchange", "cnt": 1}];
const topTickers = [{"ticker": "DASH", "trade_count": 5, "politician_count": 1}, {"ticker": "PTC", "trade_count": 5, "politician_count": 2}, {"ticker": "GS", "trade_count": 4, "politician_count": 4}, {"ticker": "PWR", "trade_count": 4, "politician_count": 2}, {"ticker": "AMZN", "trade_count": 3, "politician_count": 1}, {"ticker": "BRO", "trade_count": 3, "politician_count": 2}, {"ticker": "COIN", "trade_count": 3, "politician_count": 1}, {"ticker": "CVX", "trade_count": 3, "politician_count": 1}, {"ticker": "ETN", "trade_count": 3, "politician_count": 2}, {"ticker": "NFLX", "trade_count": 3, "politician_count": 3}, {"ticker": "NVDA", "trade_count": 3, "politician_count": 1}, {"ticker": "ORCL", "trade_count": 3, "politician_count": 1}, {"ticker": "SBAC", "trade_count": 3, "politician_count": 1}, {"ticker": "TECH", "trade_count": 3, "politician_count": 1}, {"ticker": "WAB", "trade_count": 3, "politician_count": 1}];

// ── Color palette ──
const colors = [
  '#38bdf8', '#4ade80', '#fbbf24', '#a78bfa', '#f87171',
  '#fb923c', '#2dd4bf', '#e879f9', '#818cf8', '#34d399'
];

// ── Sector Pie Chart ──
const sectorLabels = Object.keys(sectors);
const sectorValues = Object.values(sectors).map(v => (v * 100).toFixed(1));
new Chart(document.getElementById('sectorChart'), {
  type: 'doughnut',
  data: {
    labels: sectorLabels,
    datasets: [{ data: sectorValues, backgroundColor: colors }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        position: 'right',
        labels: { color: '#94a3b8', font: { size: 11 } }
      },
      tooltip: {
        callbacks: {
          label: ctx => `${ctx.label}: ${ctx.raw}%`
        }
      }
    }
  }
});

// ── Top Tickers Bar Chart ──
new Chart(document.getElementById('tickerChart'), {
  type: 'bar',
  data: {
    labels: topTickers.map(t => t.ticker),
    datasets: [
      {
        label: 'Trades',
        data: topTickers.map(t => t.trade_count),
        backgroundColor: '#38bdf8',
        borderRadius: 4
      },
      {
        label: 'Politicians',
        data: topTickers.map(t => t.politician_count),
        backgroundColor: '#a78bfa',
        borderRadius: 4
      }
    ]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    scales: {
      x: { ticks: { color: '#94a3b8' }, grid: { display: false } },
      y: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' } }
    },
    plugins: {
      legend: { labels: { color: '#94a3b8' } }
    }
  }
});

// ── Trade Type Chart ──
new Chart(document.getElementById('tradeTypeChart'), {
  type: 'pie',
  data: {
    labels: tradeTypes.map(t => t.transaction_type),
    datasets: [{
      data: tradeTypes.map(t => t.cnt),
      backgroundColor: ['#4ade80', '#f87171', '#fbbf24', '#a78bfa', '#38bdf8']
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: {
        position: 'bottom',
        labels: { color: '#94a3b8', font: { size: 11 } }
      }
    }
  }
});

// ── Signals Table ──
const signalsBody = document.getElementById('signalsTable');
signals.forEach(s => {
  const dirClass = s.direction === 'LONG' ? 'tag-long' : 'tag-short';
  const alpha5d = s.alpha_5d ? s.alpha_5d.toFixed(3) : '-';
  const alpha20d = s.alpha_20d ? s.alpha_20d.toFixed(3) : '-';
  const strength = s.signal_strength ? s.signal_strength : 0;
  const strengthPct = (strength * 100).toFixed(0);
  const barColor = strength > 0.8 ? '#4ade80' : strength > 0.5 ? '#fbbf24' : '#f87171';
  signalsBody.innerHTML += `<tr>
    <td><strong>${s.ticker}</strong></td>
    <td><span class="tag ${dirClass}">${s.direction}</span></td>
    <td>+${alpha5d}%</td>
    <td>+${alpha20d}%</td>
    <td>
      <div class="strength-bar">
        <div class="bar"><div class="fill" style="width:${strengthPct}%;background:${barColor}"></div></div>
        <span style="font-size:0.75rem;color:#94a3b8">${strengthPct}%</span>
      </div>
    </td>
  </tr>`;
});

// ── Convergence Table ──
const convBody = document.getElementById('convergenceTable');
convergence.forEach(c => {
  const dirClass = (c.direction || '').toLowerCase().includes('buy') ? 'tag-buy' : 'tag-sale';
  convBody.innerHTML += `<tr>
    <td><strong>${c.ticker}</strong></td>
    <td><span class="tag ${dirClass}">${c.direction}</span></td>
    <td>${c.politician_count || c.politicians || '-'}</td>
    <td>${c.score ? c.score.toFixed(2) : '-'}</td>
  </tr>`;
});

// ── Positions Table ──
const posBody = document.getElementById('positionsTable');
positions.slice(0, 20).forEach((p, i) => {
  const weight = p.weight ? (p.weight * 100).toFixed(2) : '-';
  const conviction = p.conviction_score ? p.conviction_score.toFixed(1) : '-';
  const alpha = p.expected_alpha_5d ? p.expected_alpha_5d.toFixed(3) : '-';
  const vol = p.volatility_30d ? (p.volatility_30d * 100).toFixed(1) : '-';
  const sharpe = p.sharpe_estimate ? p.sharpe_estimate.toFixed(2) : '-';
  posBody.innerHTML += `<tr>
    <td>${i + 1}</td>
    <td><strong>${p.ticker}</strong></td>
    <td style="color:#94a3b8">${p.sector || '-'}</td>
    <td>
      <div class="progress-bar" style="width:100px">
        <div class="progress-fill" style="width:${Math.min(weight, 100)}%"></div>
      </div>
      <span style="font-size:0.75rem">${weight}%</span>
    </td>
    <td>${conviction}</td>
    <td style="color:#4ade80">+${alpha}%</td>
    <td>${vol}%</td>
    <td>${sharpe}</td>
  </tr>`;
});

// ── Rankings Table ──
const rankBody = document.getElementById('rankingsTable');
rankings.forEach(r => {
  const chamberClass = r.chamber === 'House' ? 'tag-house' : 'tag-senate';
  const pis = r.pis_total ? r.pis_total.toFixed(1) : '-';
  const grade = r.pis_total >= 50 ? 'A' : r.pis_total >= 45 ? 'B' : r.pis_total >= 35 ? 'C' : 'D';
  const gradeColor = grade === 'A' ? '#4ade80' : grade === 'B' ? '#38bdf8' : '#fbbf24';
  rankBody.innerHTML += `<tr>
    <td>#${r.rank}</td>
    <td>${r.politician_name}</td>
    <td><span class="tag ${chamberClass}">${r.chamber}</span></td>
    <td>${r.total_trades}</td>
    <td><span style="color:${gradeColor};font-weight:700">${pis} (${grade})</span></td>
  </tr>`;
});

// ── Recent Trades Table ──
const recentBody = document.getElementById('recentTable');
recentTrades.forEach(t => {
  const typeClass = (t.transaction_type || '').toLowerCase().includes('buy') ? 'tag-buy' : 'tag-sale';
  const amount = t.amount_range || '-';
  const shortAmount = amount.replace('$', '').replace(/,/g, '').split(' - ')[0];
  recentBody.innerHTML += `<tr>
    <td>${t.politician_name}</td>
    <td><strong>${t.ticker || '-'}</strong></td>
    <td><span class="tag ${typeClass}">${t.transaction_type}</span></td>
    <td style="font-size:0.75rem">${amount}</td>
    <td style="color:#94a3b8;font-size:0.8rem">${t.filing_date || '-'}</td>
  </tr>`;
});
</script>

</body>
</html>